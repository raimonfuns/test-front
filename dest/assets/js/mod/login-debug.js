/*! Project: vip
 *  Version: 1.0.0
 *  Date: 2015-07-20 02:03:34 PM
 *  Author: 
 */define("/assets/js/mod/login-debug",["./date-debug","../lib/jquery.min-debug","../lib/jquery.min-debug"],function(a,b,c){function d(a){var b="null";("undefined"==typeof a||null==a)&&(a=window.location.href);var c=/.*\:\/\/([^\/]*).*/,d=a.match(c);return"undefined"!=typeof d&&null!=d&&(b=d[1]),b}function e(a){"function"==typeof a&&(n?a(n):window.setTimeout(function(){e(a)},30))}function f(a){"function"==typeof a&&(m?a(m):window.setTimeout(function(){f(a)},30))}function g(a){"function"==typeof a&&(o?a(o):window.setTimeout(function(){g(a)},30))}var h={v1:0,v2:600,v3:1800,v4:3600,v5:6e3,v6:10800,v7:29999,v8:88888,length:8},i=(a("./date-debug"),a("../lib/jquery.min-debug"));if(i.browser={},i.browser.mozilla=/firefox/.test(navigator.userAgent.toLowerCase()),i.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),i.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),i.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),i.browser.msie){var j=navigator.userAgent.indexOf("MSIE "),k=parseFloat(navigator.userAgent.substring(j+5,navigator.userAgent.indexOf(";",j)));6==k&&i(document).ready(function(){i('<div style="background-color:#ffffe1;border-bottom:1px solid #f90;font-size:12px;line-height:1.6;"><div style="width:960px;margin:0 auto;color:#f60;text-align:center;">您的IE浏览器版本过低，请升级您的浏览器至IE8+,以体验优质浏览效果，</div></div>').prependTo("body")})}a.async("http://res.udb.duowan.com/lgn/js/oauth/udbsdk/pcweb/udb.sdk.pcweb.popup.min-debug.js"),a.async("http://www.duowan.com/duowan-debug.js");var l="http://"+d();window.showUdbLogin=b.showUdbLogin=function(){UDB.sdk.PCWeb.popupOpenLgn(l+"/service/web/auth/prelogin",l+"/service/web/auth/udblogin",l+"/service/web/auth/fail")},window.udbLogout=b.udbLogout=function(){i.getScript(l+"/service/web/auth/logout")},window.udb_callback=b.udb_callback=function(a){UDB.sdk.PCWeb.writeCrossmainCookieWithCallBack(a,function(){return document.location.href.indexOf("/login")>=0?(document.location="/index",!1):void("function"==typeof window.onLoginSuccess?onLoginSuccess():document.location.reload())})},b.getHost=d,b.getMapFromURlParams=function(a){var a=a?a:window.location.href,b=null,c=null,d={};if(-1==a.indexOf("?"))return d;b=a.split("?")[1],paramArry=b.split("&");for(var e=0,f=paramArry.length;f>e;e++)c=paramArry[e].split("="),d[c[0]]=decodeURIComponent(c[1]);return d},b.getHashFromURI=function(a){var a=a?a:window.location.href,b=null,c=-1;return-1==(c=a.indexOf("#"))?b:a.slice(c+1)};var m,n,o,i=jQuery=a("../lib/jquery.min-debug");i.ajax({url:"/service/web/user/info",type:"GET",cache:!1,dataType:"json",success:function(a){a.result&&a.data.info.vipUser&&(a.data.info.lvScore=h["v"+(a.data.info.vipLevel+1)],a.data.info.lvRate=0,a.data.info.vipLevel<h.length&&a.data.info.vipLevel>0&&(a.data.info.lvRate=100*(a.data.info.score-h["v"+a.data.info.vipLevel])/(h["v"+(a.data.info.vipLevel+1)]-h["v"+a.data.info.vipLevel])),a.data.info.owVip&&(a.data.info.owVipExpireTime=new Date(a.data.info.owVipExpireDate).format("yyyy-mm-dd"))),m=a}}),i.ajax({url:"/service/web/user/logo",cache:!1,dataType:"json",success:function(a){a.result&&(n=a.data)}}),i.ajax({url:"http://show.vip.yy.com/service/web/vinfo",cache:!1,dataType:"jsonp",success:function(a){o=a}}),b.getUserInfo=f,b.getUserLogo=e,b.getUserZZInfo=g});