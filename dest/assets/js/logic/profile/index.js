/*! Project: vip
 *  Version: 1.0.0
 *  Date: 2015-07-20 02:03:34 PM
 *  Author: 
 */define("/assets/js/logic/profile/index",["../../mod/login","../../mod/date","../../lib/jquery.min","../../lib/template.min","../../mod/screenWatch","../../mod/header","../../mod/myinfo","../../mod/jquery.cookie","../../tpl/output/loginHder","../../tpl/output/template"],function(a,b,c){function d(a){for(var b=0,c=0,d=0,e=0,f=0,h=0,j=i.length-1;j>h;h++){if(a>=i[h]&&a<=i[h+1]){c=i[h],f=i[h+1],d=k[h],e=k[h+1];break}if(a>i[j]){c=i[j],f=o,d=k[j],e=n;break}}b=a>=o?n:c===a?d:f===a?e:(a-c)*(e-d)/(f-c)+d,g(".grow-progress__value").width(b),g(".grow-progress__value_icon").css("left",b-2)}function e(){g.ajax({url:"/service/web/user/servicePeriod",cache:!1,dataType:"json",success:function(a){a.result&&1==a.data.feeType&&(g(".table-grow__vipexpire").append(h("growth-year",a.data)),g(".vipexpire_line1").width(230*a.data.yearRate),g(".angle2").css("left",230*a.data.yearRate-3),g(".angle4").show().css("visibility","visible"),g(".vipexpire_rate").css("left",230*a.data.currentRate),a.data.yearRate<.7&&g(".vipexpire_year").css("left",230*a.data.yearRate-23),g("body").delegate(".table-grow__vipexpire","mouseenter",function(){g(this).css("border-bottom","none").find(".angle4").css("visibility","hidden"),g(".table-grow__item_vipexpire").show()}).delegate(".table-grow__vipexpire","mouseleave",function(){g(this).css("border-bottom","1px solid #f2f2f2").find(".angle4").css("visibility","visible"),g(".table-grow__item_vipexpire").hide()}))}})}var f=a("../../mod/login"),g=jQuery=a("../../lib/jquery.min"),h=a("../../lib/template.min");a("../../mod/screenWatch"),a("../../mod/header");var i=[0,600,1800,3600,6e3,10800,3e4,88888],j=[-10,15,45,80,140,240,380,600],k=[0,20,50,85,145,245,380,605],l=[-10,25,65,120,220,360,560,700],m=[0,30,70,125,225,360,565,705],n=730,o=1e5;g(".grow-progress__list li").each(function(a,b){g(this).css("left",j[a])}),g(".grow-progress__value_icon").on("mouseover",function(){g(".grow-progress__value_bg").show()}).on("mouseout",function(){g(".grow-progress__value_bg").hide()}),f.getUserInfo(function(a){if(a.result&&null!=a.data){a.data.info.vipLevel<7&&(j=l,k=m,g(".grow-progress__list li").each(function(a,b){g(this).css("left",j[a])}));var b=h("user-profile-info",a.data);f.getUserZZInfo(function(a){var b='<a href="http://vip.yy.com/vip/redirect?src=pay.yyvip" target="_blank"><i class="icon-show-gray"></i></a>';a.data&&a.data.info&&a.data.info.vipUser&&(b='<i class="icon-show-v'+a.data.info.vipGrade+'"></i>'),g("#iconPurple").replaceWith(b)}),g(".user-profile-login-div").html(b).show();var c=h("user-profile-growth-info",a.data.info);g(".grow-progress__value_bg span").text(a.data.info.score),g(".user-profile").after(c),g(".user-profile-nologin-div").hide(),a.data.info.vipUser&&(g.each(g("#tb-1vip-privilege tr"),function(b,c){var d=a.data.info.vipLevel;1==b&&d++,g(this).find("td").eq(d).addClass("current")}),g(".grow-progress__list li:lt("+(a.data.info.vipLevel-1)+")").map(function(){g(this).addClass("highlight")}),g(".grow-progress__list li:eq("+(a.data.info.vipLevel-1)+")").addClass("current"),g("#vipIncPerDay").html("+"+a.data.info.incPerDay),d(a.data.info.score),e(),g(".user-privilege-wrap").html(h("user-privilege-tpl",a.data.info)).show())}f.getUserLogo(function(a){g(".user-profile__pic img").attr("src",a)}),g.ajax({url:"http://vip.yy.com/vip/ads?adNo=20074",type:"GET",cache:!1,dataType:"jsonp",success:function(a){a.result&&g(".user-profile-adv").attr("href",a.data[0].url).text(a.data[0].desc)}})}),g("#user-profile-nologin").click(function(){showUdbLogin()}),g(".p-s1").on("click","a",function(){var a=g("#growth-table").data("line-count");return 1>=a?void g(this).toggleClass("expand"):void(g(this).hasClass("expand")?(g("#growth-table-wrap").animate({height:"87px"}),g(this).removeClass("expand")):(g("#growth-table-wrap").animate({height:42+44*a+"px"}),g(this).addClass("expand")))}),g.ajax({url:"/service/web/user/scoreHistory",cache:!1,dataType:"json",success:function(a){if(a.result){var b=h("growth-history",a.data);g("#growth-table tbody").html(b),g("#growth-table").data("line-count",a.data.historyList.length),a.data.historyList.length>0&&g("#growth-table-wrap").height(87)}}}),g(document).ready(function(){g.ajax({url:"http://vip.yy.com/vip/ads?adNo=12001&adNo=10101&adNo=10402",type:"GET",async:!0,cache:!0,dataType:"jsonp",success:function(a){var b=a.data,c=null;if(a.result&&a.data){if(b[12001]&&(c=b[12001][0],g("#weixidoublecode").append('<a href="'+(c.url?c.url:"javascript:;")+'" style="display:block;" target="_blank"><img  style="display:block;" alt="'+c.desc+'" title="'+c.desc+'" src="'+c.images+'" /></a>')),b[10101]){c=b[10101][0];var d='<a class="mod-axd" href="{{url}}" target="_blank"><img src="{{images}}" alt="{{desc}}"/></a><div class="mod-axd-bar"><span class="dot-left"></span></div>',e=h.compile(d);g("#procductWrap").html(e(c))}b[10402]&&(c=b[10402][0],g(".user-profile__adv1").html('<a href="'+c.url+'" target="_blank">'+c.desc+"</a>"))}}})})});