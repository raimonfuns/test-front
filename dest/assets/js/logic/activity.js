/*! Project: vip
 *  Version: 1.0.0
 *  Date: 2015-07-20 02:03:34 PM
 *  Author: 
 */define("/assets/js/logic/activity",["../lib/jquery.min","../mod/edt","../mod/login","../mod/date","../aralejs/slide","../aralejs/switchable","../araleWidget/widget","../araleBase/base","../araleBase/class","../araleBase/events","../araleBase/aspect","../araleBase/attribute","../araleWidget/daparser","../araleWidget/auto-render","../aralejs/plugins/effects","../aralejs/plugins/easing","../aralejs/plugins/autoplay","../aralejs/plugins/circular","../aralejs/carousel","../lib/template.min","../mod/scrolltotriggle","../mod/header","../mod/myinfo","../mod/jquery.cookie","../tpl/output/loginHder","../tpl/output/template","../mod/loginSider","../tpl/output/loginSider"],function(a,b,c){function d(){k=new j({element:"#rpl-mainslide",duration:300,effect:"scrollx",easing:"easeOutStrong",autoplay:!0,hasTriggers:!1,triggers:".ui-switchable-trigger",activeTriggerClass:"active"}).render()}function e(){var a=h(window).width();9>l&&(1200>a?h("body").removeClass("screen-wide"):h("body").addClass("screen-wide")),f()}function f(){var a,b=h(window).width();a=1200>b?"narrow":"wide",a!==n&&(n=a,null!==k&&(k.destroy(),m.find(".slide__trigger").removeClass("active"),d(),k.switchTo(0)))}function g(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var b=navigator.userAgent,c=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a}var h=jQuery=a("../lib/jquery.min"),i=a("../mod/edt"),j=a("../aralejs/slide");a("../mod/date");var k,l=g(),m=h("#rpl-mainslide"),n=h(window).width()<1200?"narrow":"wide",o=null;h(window).resize(function(){clearTimeout(o),o=setTimeout(function(){e()},300)}),e();var j=(a("../aralejs/carousel"),a("../aralejs/slide")),p=a("../lib/template.min"),q=a("../mod/scrolltotriggle");p.helper("$dataFormat",function(a){return new Date(a).format("yyyy-mm-dd")});var r={_isEmpty_:!1,_length_:8,_current_:0,_$container_:h("#rpl-activity"),_$loading_:h("#rpl-activityloading"),_isAjax_:!1,_type_:1,get:function(){var a=this;return a._isAjax_?!1:(a._isAjax_=!0,a._isEmpty_?!1:(a._$loading_.show(),a._current_=a._current_+1,void h.ajax({url:"/service/web/activitycenter/page",type:"GET",dataType:"json",cache:!1,data:{pageno:a._current_,pagesize:a._length_,type:a._type_},success:function(b){var c=b.data;a._isAjax_=!1,null!==c&&(0==c.list.length&&(a._isEmpty_=!0),a._$container_.append(p("tpl-activity",c)))},complete:function(){a._$loading_.hide()}})))}},s={_loadingClass_:"slide-s3loading",_$container_:h("#rpl-mainslide"),get:function(){var a=this;a._$container_.addClass("slide-s3loading"),h.ajax({url:"http://vip.yy.com/vip/ads",type:"GET",dataType:"jsonp",cache:!1,data:{adNo:10208},success:function(b){b.data;a._$container_.append(p("tpl-mainslide",{list:b.data})),d(),i.init()},complete:function(){a._$container_.removeClass("slide-s3loading")}})}};s.get(),q.addAction(function(){this.toBottom<200&&this.toBottom>100&&"down"==this.directive&&r.get()}),h(document).ready(function(){r.get(),a("../mod/header"),a("../mod/loginSider")}),i.regist([{pid:7,nullRemove:!0,complete:function(a,b){if(b){var c='<li class="ui-switchable-trigger">99</li>';h(".ui-switchable-nav").append(c)}k.destroy(),k=null,n=null,e(),d()}}])});