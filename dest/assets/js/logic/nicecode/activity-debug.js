/*! Project: vip
 *  Version: 1.0.0
 *  Date: 2015-07-20 02:03:34 PM
 *  Author: 
 */define("/assets/js/logic/nicecode/activity-debug",["../../lib/jquery.min-debug","../../mod/screenWatch-debug","../../mod/date-debug","../../mod/header-debug","../../mod/login-debug","../../mod/myinfo-debug","../../mod/jquery.cookie-debug","../../tpl/output/loginHder-debug","../../tpl/output/template-debug","../../mod/nicecodeLoginSider-debug","../../tpl/output/nicecodeLoginSider-debug","../../mod/ajaxhelper-debug","../../lib/template.min-debug","../../mod/scrolltotriggle-debug"],function(a,b,c){function d(a){var b="null";("undefined"==typeof a||null==a)&&(a=window.location.href);var c=/.*\:\/\/([^\/]*).*/,d=a.match(c);return"undefined"!=typeof d&&null!=d&&(b=d[1]),a.substring(a.indexOf(b)+b.length)}function e(){g.ajax({url:"/service/web/nicecode/mine/info",type:"GET",cache:!1,dataType:"jsonp",success:function(a){a.data&&(g("#myCouponSize").html(a.data.couponSize),g("#myOrderSize").html(a.data.orderSize))}})}function f(){var a=m[l].url;g.ajax({url:a,type:"GET",cache:!1,dataType:"json",context:{maskId:g("#getNiceCode")},success:function(a){a.result&&g("#"+l).html(h(m[l].tpl,{hotCodes:a.data[m[l].dataname]}))}})}var g=jQuery=a("../../lib/jquery.min-debug");a("../../mod/screenWatch-debug"),a("../../mod/date-debug"),a("../../mod/header-debug"),a("../../mod/nicecodeLoginSider-debug"),a("../../mod/ajaxhelper-debug");var h=a("../../lib/template.min-debug"),i=a("../../mod/scrolltotriggle-debug");h.helper("$dataFormat",function(a){return new Date(a).format("yyyy-mm-dd")}),g(".nicecode-nav").find("a").each(function(a,b){var c=d();return 0==c.indexOf(g(b).attr("href"))?(g(b).addClass("active"),!1):void 0});var j={_isEmpty_:!1,_length_:8,_current_:0,_$container_:g("#rpl-activity"),_$loading_:g("#rpl-activityloading"),_isAjax_:!1,_type_:1,_total_:0,get:function(){var a=this;return a._isAjax_?!1:(a._isAjax_=!0,a._isEmpty_?!1:(a._$loading_.show(),a._current_=a._current_+1,void g.ajax({url:"/service/web/activitycenter/getActByTypeNop",type:"GET",dataType:"json",cache:!1,data:{pageno:a._current_,pagesize:a._length_,act_type:5,type:window.activityType},success:function(b){var c=b.data;a._isAjax_=!1,a._total_=b.data.totalPage,null!==c&&(0==c.list.length&&(a._isEmpty_=!0),a._$container_.append(h("tpl-activity",c)))},complete:function(){a._$loading_.hide()}})))}};i.addAction(function(){this.toBottom<200&&this.toBottom>100&&"down"==this.directive&&j._current_<j._total_&&j.get()}),g(document).ready(function(){j.get()});var k=a("../../mod/login-debug");k.getUserInfo(function(a){a&&a.data.info&&a.data.info.vipUser&&e()});var l="niceCodeBox1",m={niceCodeBox1:{url:"/service/web/nicecode/index/randomImList",dataname:"yyImList",tpl:"tplNiceCode1"},niceCodeBox2:{url:"/service/web/nicecode/index/randomSessionNumberList",dataname:"channelIdList",tpl:"tplNiceCode2"},niceCodeBox3:{url:"/service/web/nicecode/index/randomLoversImList",dataname:"loversImList",tpl:"tplNiceCode3"}};g("#recommendNav").on("mouseenter","a",function(a){g(this).addClass("activity").siblings("a").removeClass("activity"),l=g(this).data("targetbox");var b=g("#"+g(this).data("targetbox"));b.show().siblings().hide(),g("#moreLink").prop("href",g(this).data("morelink")),""==g("#"+l).html()&&f()}),g("#getNiceCode").on("click",f).trigger("click")});