/*! Project: vip
 *  Version: 1.0.0
 *  Date: 2015-07-20 02:03:34 PM
 *  Author: 
 */define("/assets/js/logic/nicecode/customyy",["../../lib/jquery.min","../../lib/template.min","../../mod/dialog/dialog","../../mod/dialog/popup","../../mod/dialog/dialog-config","../../mod/screenWatch","../../mod/header","../../mod/login","../../mod/date","../../mod/myinfo","../../mod/jquery.cookie","../../tpl/output/loginHder","../../tpl/output/template","../../mod/ajaxhelper","./nicecodenav","../../mod/pagehelper","../../tpl/output/pager"],function(a,b,c){function d(a){g.ajax({url:k.serurl,dataType:"json",data:n,context:{maskId:g("#searchBtn")},success:function(a){a.result&&(g("#imListBox").html(h(k.tpl,a.data)),p.initPage("#pager",a.data,e,n),q=a.data.totalPages)}})}function e(a){g.ajax({async:!0,cache:!1,url:k.serurl,data:a,context:{maskId:"pager"},dataType:"json",success:function(b){b.result&&(b.data.totalPages=q,p.initPage("#pager",b.data,e,a),g("#imListBox").html(h(k.tpl,b.data)))}})}function f(){g.ajax({url:"/service/web/nicecode/yy/code/boutique?size=4",type:"GET",cache:!1,dataType:"json",context:{maskId:"getNiceCode"},success:function(a){a.result&&g("#niceCodeBox").html(h("tplNiceCode",a.data))}})}var g=jQuery=a("../../lib/jquery.min"),h=a("../../lib/template.min"),i=a("../../mod/dialog/dialog");a("../../mod/screenWatch"),a("../../mod/header"),a("../../mod/ajaxhelper"),a("./nicecodenav");var j=a("../../mod/login");j.getUserInfo(function(a){a&&a.data&&a.data.info&&a.data.info.vipUser});var k,l=1,m=window.location.search.substr(1).match(/(^|[&|?])type=([^&]*)(&|$)/);null!=m&&(l=unescape(m[2]));var n={code:0,priceRangeCode:0,sizeCode:0,searchTxt:"",currentPage:1},o=[{serurl:"/service/web/nicecode/yy/code/select?type=1",tpl:"tpl_ImList",className:"nicecode-list__N"},{serurl:"/service/web/nicecode/yy/code/select?type=3",tpl:"tpl_ChList",className:"nicecode-list__C"}];g("#searchBtn").on("click",function(){var a=g(this).prev("input").val();/^\d+$/.test(a)?(g.extend(n,{searchTxt:a,currentPage:1}),d(k)):i.showMsgBox("请输入正确的靓号")}),g("#searchTxt").keypress(function(a){13==a.keyCode&&g(this).siblings("a").trigger("click")});var p=a("../../mod/pagehelper"),q=1;g("#customNav").on("click","a",function(){if(!g(this).hasClass("active")){var a=g(this).data("type");g("#searchTxt").val(""),g("#rule"+a).show().siblings(".custom-search-rule").hide(),g(this).addClass("active").parent("li").siblings().find("a").removeClass("active"),k=o[a-1],g("#imListBox").removeClass().addClass("nicecode-list "+k.className),g("#imListBox").html("")}}).find("a[data-type="+l+"]").trigger("click"),function(){var a='<a href="{{url}}" target="_blank"><img src="{{images}}" alt="{{desc}}" style="width:230px;height:150px;"/></a>';g.ajax({url:"http://vip.yy.com/vip/ad?adNo=40004",type:"GET",cache:!1,dataType:"jsonp",success:function(b){b.data&&g("#mallTrendAxd").html(h.compile(a)(b.data))}})}(),g("#buyRules").on("click",function(){var a="";a="tpl_ImList"==k.tpl?'<ul class="rules-detail">	<li><span>会员和普通用户都可以购买YY靓号</span></li>	<li><span>买YY靓号送3个月会员，客户端会显示YY靓号图标，当购买YY靓号超过一定金额时，会获得YY土豪靓号图标</span></li>	<li><span>购买单号靓号的用户，所购买的靓号需手动绑定在购买时使用的账号上，不可转移绑定在其它账号上</span></li>	<li><span>成功购买YY靓号后，请在30天内完成绑定，如逾期未完成绑定，YY会员将有权回收该靓号且不退款</span></li>	<li><span>拥有YY靓号需要一直保持YY会员身份，如使用YY靓号过程中YY会员过期，且超过30天未续费，该YY靓号将会将被系统回收</span></li>	<li><span>情侣靓号的其中一个号码默认绑定在购买时使用的账号上，另一个号码绑定在手动输入的YY号上,绑定的YY号需是好友关系</span></li>	<li><span>购买情侣靓号需要遵守以上规定，如有一个号码没有满足以上规定，则两个靓号将一起被系统回收</span></li></ul>':'<ul class="rules-detail">	<li><span>YY用户均可购买频道靓号。购买成功后会赠送您3张加油金卡，系统会在靓号激活后为您自动使用。</span></li>	<li><span>购买靓号后，用户可把靓号覆盖到购买账号已拥有的频道号上，原始频道的积分、等级等，均能移植到频道靓号上。靓号不能转移到其他YY账号下。</span></li>	<li><span style="color:red;">原始频道必须先完成频道类型认证，才能激活频道靓号。<a href="https://hao.yy.com/owauth/authDefault" target="_blank">完成频道认证</a></span></li>	<li><span>频道靓号购买后，需按相关的考核标准参与考核。<a href="http://vip.yy.com/vip/nicecode/channelrule" target="_blank">详细说明</a></span></li>	<li><span>购买靓号时，需在30分钟内完成支付；逾期未完成支付的号码，将重新上架到商城。</span></li>	<li><span>成功购买频道靓号后，30天内需在会员<a href="http://vip.yy.com/vip/nicecode/mine" target="_blank">靓号商城-我的购买</a>中完成激活。否则靓号商城有权回收靓号，余额不退。</span></li></ul>',i.showMsgBox(a)}),g("#getNiceCode").on("click",f).trigger("click"),function(){g.ajax({url:"/service/web/nicecode/yy/code/boutique?size=2",type:"GET",cache:!1,dataType:"json",success:function(a){a.result&&g("#niceCodeLowBox").html(h("tplNiceCode",a.data))}})}()});