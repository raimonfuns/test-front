/*! Project: vip
 *  Version: 1.0.0
 *  Date: 2015-07-20 02:03:34 PM
 *  Author: 
 */define("/assets/js/logic/nicecode/freecheck-debug",["../../lib/jquery.min-debug","../../lib/template.min-debug","../../mod/dialog/dialog-debug","../../mod/dialog/popup-debug","../../mod/dialog/dialog-config-debug","../../mod/screenWatch-debug","../../mod/header-debug","../../mod/login-debug","../../mod/date-debug","../../mod/myinfo-debug","../../mod/jquery.cookie-debug","../../tpl/output/loginHder-debug","../../tpl/output/template-debug","../../mod/ajaxhelper-debug","./nicecodenav-debug","../../mod/pagehelper-debug","../../tpl/output/pager-debug"],function(a,b,c){function d(a){"1"!=a.type||l&&0!=l.length||e.ajax({url:"/service/web/nicecode/freecheck/load/code",dataType:"json",success:function(b){l=[],b.result&&b.data.fcheckcode&&(l=b.data.fcheckcode.codelist),l=void 0==l?[]:l,e("#"+a.contaner).html(f(a.tpl,{datas:l}))}})}var e=jQuery=a("../../lib/jquery.min-debug"),f=a("../../lib/template.min-debug"),g=a("../../mod/dialog/dialog-debug");a("../../mod/screenWatch-debug"),a("../../mod/header-debug"),a("../../mod/ajaxhelper-debug"),a("./nicecodenav-debug");var h=a("../../mod/login-debug");h.getUserInfo(function(a){a&&a.data&&a.data.info&&a.data.info.vipUser});var i,j=1,k=window.location.search.substr(1).match(/(^|[&|?])type=([^&]*)(&|$)/);null!=k&&(j=unescape(k[2]));var l,m=[{type:"1",contaner:"codeList",tpl:"tplCodeList"},{type:"2",contaner:"othercodelist",tpl:"tplOthercodelist"},{type:"3"}];a("../../mod/pagehelper-debug");e("#orderlist").delegate("#buyCheckBtn","click",function(){var a=e(this),b=a.siblings("h3[data-type=errorTip]"),c=a.siblings("input[type=text]"),d=e.trim(c.val());b.hide();var h=d;h&&0!=h.length?/^[0-9]+$/.test(h)?e.ajax({type:"post",dataType:"json",url:"/service/web/nicecode/checkScoreInfo",data:{asid:h},async:!0,cache:!1,context:{maskId:a},success:function(a){if(a.result){var b=a.data.fcheckcode.codelist;e("#"+m[1].contaner).show(),e("#"+m[1].contaner).html(f(m[1].tpl,{datas:b}))}else e("#"+m[1].contaner).html(""),1e3==a.code?showUdbLogin():(c.val(""),g.showMsgBox(a.desc))}}):g.showMsgBox("输入的频道号含有非法字符。"):g.showMsgBox("输入的频道号不能为空的！")}),e("#orderlist").delegate("#livecheckBtn","click",function(){var a=e(this),b=a.siblings("h3[data-type=errorTip]"),c=a.siblings("input[type=text]"),d=e.trim(c.val());return b.hide(),"输入原频道号码"==d||0==d.length?(g.showMsgBox("原频道号不能为空的！"),!1):/^\d+$/.test(d)?void e.ajax({type:"post",dataType:"json",url:"/service/web/nicecode/rebind/owCheck",data:{sid:d},async:!0,cache:!1,context:{maskId:a},success:function(a){if(a.result)1==a.data.status?g({title:"操作信息",content:"复活的频道长位号："+a.data.sid+"将会重新绑定到频道短位号："+a.data.asidInfoList[0].asid+"， 确定要复活该频道长位号吗？",padding:"10px 15px",skin:"ui-dialog-skin-vip",lock:!0,ok:function(){n(a.data.asidInfoList[0].asid,a.data.sid,this)},okValue:"确定复活",cancelValue:"暂不复活",cancel:function(){}}).showModal():(c.val(""),g.showMsgBox(a.desc));else{if(-1==a.code)return void g.showMsgBoxOkFun(a.desc,"开通OW会员",function(){window.open("http://vip.yy.com/vip/vmall2/owvippay","_target")});g.showMsgBox(a.desc)}}}):(g.showMsgBox("原频道号只能为数字！"),!1)});var n=function(a,b,c){e.ajax({url:"/service/web/nicecode/rebind/bind",type:"GET",dataType:"json",cache:!1,data:{sid:b,asid:a},context:c,success:function(a){a.result?(e("#rebindCount").text(a.data),g.showMsgBox(a.desc)):g.showMsgBox(a.desc)}})};e("#customNav").on("click","a",function(){if(!e(this).hasClass("active")){var a=e(this).data("type");e("#table-"+a).show().siblings(".custom-search-rule").hide(),e(this).addClass("active").parent("li").siblings().find("a").removeClass("active"),i=m[a-1],d(i)}}).find("a[data-type="+j+"]").trigger("click"),e.ajax({url:"/service/web/nicecode/ResurrectionTime",type:"GET",dataType:"json",cache:!1,success:function(a){e("#rebindCountLabel").text(a.data)}})});