/*! Project: vip
 *  Version: 1.0.0
 *  Date: 2015-07-20 02:03:34 PM
 *  Author: 
 */window.Edt=function(){},Edt.prototype.datas={},Edt.prototype.pidNeedActions={},Edt.prototype.pidActions={},Edt.prototype.delElements=[],Edt.prototype.uid,Edt.prototype.options=[],Edt.prototype.pids=[],Edt.prototype.init=function(a,b){function c(){function a(a,b,c){var d=b.pid,e=[b],f=0;b.adId||(e=b.rcmdViews,f=1);var g=m(b.pid);if(g&&!g.more&&e.length>1&&(e=[e[0]]),!e)return"";if(0==e.length)return"";for(var h='<div class="div-'+d+"-edt-item"+c+'"  edt-group="'+d+'">',i=0,j=0;j<e.length;j++){b=e[j],i++;var k="block";i>1&&(k="none"),b.targetDesc||(b.targetDesc=b.link),b.content||(b.content="宣传");var l;l=b.targetDesc&&-1==b.targetDesc.indexOf("yy://")?"_blank":"_self",h+='<a class="a-'+d+"-edt-item"+c+"-"+j+'" style="display: '+k+';" edt-parent="'+d+'"  id="'+d+"-edt-item"+j+'" href="'+b.targetDesc+'" target="'+l+'" edt-url="'+b.targetDesc+'" edt-m = "'+b.m+'"  edt-link-type="'+f+'" edt-id="'+b.adId+'">',0==a?b&&(h+='<img class="img-'+d+"-edt-item"+c+"-"+j+'" src="'+b.imgUrl+'" alt="'+b.content+'">'):1==a?b.content&&(h+='<p class="p-'+d+"-edt-item"+c+"-"+j+'">'+b.content+"</p>"):2==a&&(b&&(h+='<img class="img-'+d+"-edt-item"+c+"-"+j+'" src="'+b.imgUrl+'" alt="'+b.content+'">'),b.content&&(h+='<p class="p-'+d+"-edt-item"+c+"-"+j+'">'+b.content+"</p>")),h+="</a>"}return h+="</div>"}function b(a,b){var c=f[a],d=m(a);if(!(c>0)){for(var e=0;e<h.length;e++)try{h[e]&&d.nullRemove&&(d.deled=!0,h[e].remove())}catch(i){}if(h=[],d&&d.complete)for(var c=g[a],j=0;c>j;j++)1!=d.deled?d.complete(a,b):d.complete(a,null);for(var k=$(document).find("[edt-group="+a+"]"),j=0;j<k.length;j++){var l=k[j],n=$(l).find("[edt-parent="+a+"]"),o=new Sliders;o.init(n,5e3)}}}function c(a,b,c,d,e){b=b||0,d=d||"0",0==e&&$.ajax({url:"http://e.yy.com/service/throw/edt/throw/click2?uid="+b+"&id="+a+"&m="+d,type:"GET",async:!1,dataType:"jsonp",success:function(a){a.result}}),c&&-1==c.indexOf("yy://")}function k(a,b,c){var d={result:!1};for(var e in j.datas){var f=j.datas[e];if(f.pid==a)return d.result=!0,d.data=f,void c(d)}return c(d),d}function l(a,b,c){b=b||0;var d=a.join(",");$.ajax({url:"http://e.yy.com/service/throw/edt/throw/views",type:"GET",cache:!1,data:{uid:b,pids:d},dataType:"jsonp",success:c})}function m(a){for(var b in i){var c=i[b];if(c.pid==a)return c}return null}var n=$(document).find("[data-edit-show]");n.hide();var o=[],p=[];if(e&&e.length>=0)for(var q=0;q<e.length;q++){var r=e[q],s=$(document).find("[data-edt-pid="+r+"]");p=p.concat(s)}else p=$(document).find("[data-edt-pid]");for(var q=0;q<p.length;q++){var t=$(p[q]).data("edt-pid");o.push(t);var u=m(t);u||(u=[{pid:t}],j.regist(u)),f[t]||(f[t]=0),g[t]||(g[t]=0),f[t]=f[t]+1,g[t]=g[t]+1}l(o,d,function(e){j.datas=e.data;for(var g=0,i=0;i<p.length;i++){var l=$(p[i]).data("edt-pid"),m=$(p[i]).data("edt-mode");g++;var n={$edtElement:$(p[i]),pid:l,mode:m,groupIndex:g,action:function(){var c=this,e=this.pid,i=void 0==this.mode?0:this.mode,j=setTimeout(function(){f[e]=f[e]-1,h.push(c.$edtElement),b(e,null)},5e3);k(e,d,function(d){clearTimeout(j);var k;if(d.result){var l=[d.data];if(l)for(var m=0;m<l.length;m++){k=l[m];var n=a(i,k,g);c.$edtElement.show(),c.$edtElement.removeAttr("data-edit-show"),n&&""!=n?c.$edtElement.html(n):(c.$edtElement.hide(),h.push(c.$edtElement))}else c.$edtElement.hide(),h.push(c.$edtElement)}else c.$edtElement.hide(),h.push(c.$edtElement);f[e]=f[e]-1,k&&!k.adId&&k.rcmdViews&&k.rcmdViews.length>0?b(e,k.rcmdViews[0]):b(e,k)})}};n.action()}$(document).on("click","[edt-id]",function(a){c($(this).attr("edt-id"),d,$(this).attr("edt-url"),$(this).attr("edt-m"),$(this).attr("edt-link-type"))})})}var d=this.uid=b,e=this.pids=a,f=this.pidNeedActions,g=this.pidActions,h=this.delElements,i=this.options,j=this;c()},Edt.prototype.defaultOption={nullRemove:!1,more:!0},Edt.prototype.regist=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=$.extend({},this.defaultOption),e=$.extend(d,c);this.options.push(e)}},window.Sliders=function(){},Sliders.prototype.items,Sliders.prototype.init=function(a,b){if(a){var c=$(a);this.items=c,c.hide(),$(c[0]).show();var d=c.length,e=0;setInterval(function(){e++,e>=d&&(e=0),c.hide(),$(c[e]).show()},b)}},Sliders.prototype.destroy=function(){};